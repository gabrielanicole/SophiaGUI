<!DOCTYPE html>
<html lang="es">
<head>
  <title>Sophia</title>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link rel="stylesheet" href="http://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/css/bootstrap.min.css">
  <link rel="stylesheet" href="/static/explora/articles.css" type="text/css">
  <link rel="stylesheet" href="/static/explora/navbar.css" type="text/css">
  <link href="https://fonts.googleapis.com/css?family=Roboto" rel="stylesheet"> 
  <link href="//netdna.bootstrapcdn.com/font-awesome/4.0.3/css/font-awesome.css" rel="stylesheet">
  <script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/1.12.2/jquery.min.js"></script>
  <script type="text/javascript" src="http://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/js/bootstrap.min.js"></script>
</head>
<body>

 
	<script type="text/javascript">
		//Script called to open the modal window
		
		$(document).ready(function(){
			$('.news-data').on('click',function(){
				
				var pk = $(this).data('val');
				
				$.ajax({
				    url: '/articles/modal_new',
				    type: 'POST',
				    data:{news_id:pk , csrfmiddlewaretoken: '{{ csrf_token }}'},
				    success: function(data) {
				    	//Find if the element already exist
				    	if( $('#myModal').length )
				    	{
				    		$('#myModal').remove();
				    	}
				    	//In the tag <modal> the append the response from Django
				        $('#modal').append(data);
				    	//Then display the modal window
				        $('#myModal').modal('show');
				    },
				    failure: function(data) { 
				        alert('Error de conexión');
				    },
				    crossDomain: true
				}); 							
			});
		});
		
	</script>
	
	<nav id="custom-bootstrap-menu" class="navbar navbar-default">
	  <div class="container-fluid">
	    <div class="navbar-header">
	      <a class="navbar-brand" href="#">Sophia Project</a>
	    </div>
	    <ul class="nav navbar-nav navbar-right">
	    	{%if profile_pic %}
	    		<li>
	    		<img src="{{profile_pic}}" class="profile-pic img-circle">
	    	    </li>
	      	{% else %}
		    	<li>
		    		<img src="http://placehold.it/50x50" class="profile-pic img-circle">
		    	</li>
		    {% endif %}
	      	<li>
	      		<a href="#">{{user}}</a>
	      	</li>

    	  <li>
		    <p style="padding-right:10px" class = "navbar-btn">
		       <a href="#" class="btn btn-default" role="button"><span class="glyphicon glyphicon-cog"></span> Configuración</a>
		    </p>
		  </li>
		  <li>
		    <p style ="padding-right:10px" class = "navbar-btn">
		    	<a href="/logout" class="btn btn-default" role="button"><span class="glyphicon glyphicon-off"></span> Log out</a>
		    </p>
		  </li>
	    </ul>
	  </div>
	</nav>

	<div class="container-fluid">
		<div class="col-md-3">
			<ul class="nav nav-pills nav-stacked">
			  <li role="presentation"><a href="#">Aplicación 1</a></li>
			  <li role="presentation"><a href="#">Aplicación 2</a></li>
			  <li role="presentation"><a href="#">Aplicación 3</a></li>
			  <li role="presentation"><a href="#">Aplicación 4</a></li>
			</ul>
		
		</div>
		
		<div class="col-md-9">
		
		
			
			<div class=row>
			
				<form class="navbar-form navbar-left" role="search">
				    <div class="form-group">
				        <input type="text" class="form-control" name="terminos" placeholder="Terminos">		        
				    </div>
		
				    <div class="form-group">
				        <div class="selectContainer">
				            <select class="form-control" name="medio">
				            	<option value="null"> Cualquier medio</option>
				                <option value="m1">Medio 1</option>
				                <option value="m2">Medio 2</option>
				                <option value="m3">Medio 3</option>
				                <option value="m4">Medio 4</option>
				            </select>
				        </div>
				    </div>
				    
				    <div class="form-group">
				        <div class="selectContainer">
				            <select class="form-control" name="categoria">
				            	<option value="null"> Cualquier categoria</option>
				                <option value="c1">Categoria 1</option>
				                <option value="c2">Categoria 2</option>
				                <option value="c3">Categoria 3</option>
				                <option value="c4">Categoria 4</option>
				            </select>
				        </div>
				    </div>
					<button type="submit" class="btn btn-default"><span class="glyphicon glyphicon-search"></span>  Buscar</button>	
					<button type="submit" class="btn btn-default"><span class="glyphicon glyphicon-search"></span>  Busqueda Avanzada</button>
	  			</form>
	  				  					
		</div>
		<div class="row">
				<ul class="pagination">
				<li><a href="#">&laquo;</a></li>
			   {% for i in num_pages %}
			   	 <li><a href="/articles/{{i}}/">{{i}}</a></li>
			   {% endfor %}
			    <li><a href="#">&raquo;</a></li>
			  
			</ul>
		</div>
				
				 {% for d in data %}
				<div class="row top-buffer news-deploy">
					<div class ="col-md-3">
						<img class="img-responsive" alt="image-not-found" src="{{d.imageLink}}">
					</div>
					<div class="col-md-9">
						<span style="cursor:pointer">
						    <h3 class="news-data" data-val="{{d.pk}}" ">{{ d.title }}</h3>
						</span>	
	                    <p  class="news-data" > {{ d.content|truncatechars:500 }} </p>
	                </div>
				</div>
				 {% endfor %}
			</div>
	 </div>
	
	<!-- Here we put the rendered modal window code via AJAX-->
	<div id="modal"> </div>

</body>
</html>